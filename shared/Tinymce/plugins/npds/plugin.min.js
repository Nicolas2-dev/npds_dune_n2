/*
    NPDS 2001 - 2022
    Tinymce V6.2.0 implémentation
*/
(function() {
tinymce.PluginManager.requireLangPack("npds"),tinymce.PluginManager.add('npds', 

function(editor,url) {
   editor.ui.registry.addMenuButton('npds_langue', {
      tooltip: tinymce.translate('npds_what_desc'),
      icon:'npdslang',
      fetch: function (callback) {
         var items = [
            {
               type: 'menuitem',
               text: tinymce.translate('npds_all_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[french] [/french]&nbsp;[english] [/english]&nbsp;[spanish] [/spanish]&nbsp;[german] [/german]&nbsp;[chinese] [/chinese]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_french_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[french] [/french]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_frenchonly_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[!french] [/french]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_english_desc'),
               onAction: function () {
                  editor.insertContent('&nbsp;[english] [/english]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_englishonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!english] [/english]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_spanish_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[spanish] [/spanish]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_spanishonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!spanish] [/spanish]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_chinese_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[chinese] [/chinese]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_chineseonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!chinese] [/chinese]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_german_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[german] [/german]&nbsp;');
               }
            },
            {
               type: 'menuitem',
               text: tinymce.translate('npds_germanonly_desc'),
               onAction: function() {
                  editor.insertContent('&nbsp;[!german] [/german]&nbsp;');
               }
            }
         ]
         callback(items);
      }
   }),

   editor.ui.registry.addButton('npds_img', {
      icon : 'npdsimag',
      tooltip : tinymce.translate('npds_img_desc'),
      onAction : function () {
         NPDS_img();
      },
   });
   var NPDS_img = function () {
      return editor.windowManager.openUrl({
         title : tinymce.translate('npds_img_desc'),
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=bank-public',
         width : 550,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      },
      {
          plugin_url : url, // Plugin absolute URL
       });
    };

   editor.ui.registry.addButton('npds_perso', {
      icon : 'npdsperso',
      tooltip : tinymce.translate('npds_perso_desc'),
      onAction : function () {
         NPDS_perso();
      },
   });
   var NPDS_perso = function () {
      return editor.windowManager.openUrl({
         title : tinymce.translate('npds_perso_desc'),
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=bank-membre',
         width : 550,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };

   var NPDS_Mns = function () {
      editor.windowManager.openUrl({
         title : tinymce.translate('npds_mns_desc'),
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=minisite-lec',
         width : 450,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('npds_mns', {
      icon: 'npdsmns',
      tooltip : tinymce.translate('npds_mns_desc'),
      onAction : function () {
         NPDS_Mns();
      },
   });


   var NPDS_Upl = function () {
      editor.windowManager.openUrl({
         title : tinymce.translate('npds_upl_desc'),
         url : 'modules.php?ModPath=upload&ModStart=include_editeur/upload_editeur2&apli=editeur',
         width : 550,
         height : 250,
         resizable : 'yes',
         scrollbars : 'no',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('npds_upl', {
      icon : 'npdsupload',
      tooltip : tinymce.translate('npds_upl_desc'),
      onAction : function () {
         NPDS_Upl();
      },
   });

//==> réservé à des contextes ou UN groupe existe dans les paramètres (ex : wspad) donc ne pas utiliser dans le context commun
   var NPDS_Gupl = function () {
      editor.windowManager.openUrl({
         title : tinymce.translate('npds_upl_groupe'),
         url : 'modules.php?ModPath=upload&ModStart=include_editeur/upload_editeur2&apli=editeur'+tinyMCE.activeEditor.options.get('tiny_mce_groupe'),
         width : 350,
         height : 300,
         resizable : 'yes',
         scrollbars : 'no',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('npds_gupl', {
      tooltip : tinymce.translate('npds_upl_groupe'),
      icon : 'npdsupload',
      onAction : function () {
         NPDS_Gupl();
      },
   });
   
   var NPDS_GMns = function (tiny_mce_groupe) {
      editor.windowManager.openUrl({
         title : 'Minisite du groupe',
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=minisite-lec-groupe'+tinyMCE.activeEditor.options.get('tiny_mce_groupe'),
         width : 450,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   editor.ui.registry.addButton('npds_gmns', {
      icon: 'npdsmns',
      tooltip : tinymce.translate('npds_mns_desc'),
      onAction : function () {
         NPDS_GMns();
      },
   });

   editor.ui.registry.addButton('npds_gperso', {
      icon:'npdsperso',
      tooltip : tinymce.translate('npds_perso_desc'),
      onAction : function () {
         NPDS_GPerso();
      },
   });
   var NPDS_GPerso = function () {
      return editor.windowManager.openUrl({
         title : 'Groupe : images et documents',
         url : 'modules.php?ModPath=f-manager&ModStart=f-manager&FmaRep=bank-groupe'+tinyMCE.activeEditor.options.get('tiny_mce_groupe'),
         width : 450,
         height : 500,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
// <== réservé à des contextes ou UN groupe existe dans les paramètres (ex : wspad) donc ne pas utiliser dans le context commun


   editor.ui.registry.addButton('npds_metal', {
      tooltip : tinymce.translate('npds_metal_desc'),
      icon: 'npdsmeta',
      onAction : function () {
         NPDS_MetaL();
      },
   });
   var NPDS_MetaL = function () {
      editor.windowManager.openUrl({
         title : 'METAMOT NPDS',
         url : 'modules.php?ModPath=meta-lang&ModStart=adv-meta_lang-doc',
         width : 700,
         height : 400,
         resizable : 'yes',
         scrollbars : 'yes',
         inline : 1
      }, {
         plugin_url : url, // Plugin absolute URL
      });
   };
   
})
})
();